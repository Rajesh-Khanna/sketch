(this.webpackJsonpsketch=this.webpackJsonpsketch||[]).push([[0],{178:function(e,t,a){},180:function(e,t,a){},257:function(e,t,a){},258:function(e,t,a){"use strict";a.r(t);var r=a(7),n=a(1),c=a.n(n),s=a(32),o=a.n(s),i=(a(178),a(179),a(180),a(24)),l=a(50),u=a(41),h=a(267),d=a(94),b=a(57),j={HOST:"HOST",GATHERING:"GATHERING",PASSIVE_BOARD:"PASSIVE_BOARD",ACTIVE_BOARD:"ACTIVE_BOARD",TERMINAL:"TERMINAL",DISCONNECTED:"DISCONNECTED"};Object.freeze(j);Object.freeze({HOST:"HOST",GUEST:"GUEST"});Object.freeze({CLIENT:"CLIENT",OFFER:"OFFER",ANSWER:"ANSWER",GUEST:"GUEST"});var g="/sketch",m="#fff",p="NEW_PLAYER",f="PLAYERS",y="START_GAME",O="END_GAME",x="HEART_BEAT",k="ALIVE",v="TURN_TIME",w="ROUND_NUM",S="GUESS",N="SOLVED",I="CORRECT_WORD",T="NEW_PLAYER",E="DRAW",C="FILL",R="SAVE",A="UNDO",B="CLEAR",G=[{name:"meta",type:"data"},{name:"brush",type:"data"},{name:"chat",type:"data"},{name:"background",type:"data"}],P={apiKey:"AIzaSyC76AeV9WHmHfgN0dSJcMLfXOHHI09ZZDs",authDomain:"sketch-e5889.firebaseapp.com",projectId:"sketch-e5889",storageBucket:"sketch-e5889.appspot.com",messagingSenderId:"417640075335",appId:"1:417640075335:web:d27812bbfa1a905bcea162",measurementId:"G-2RWBX5QBR6"},D=a(45),M=function(e){var t=e.handleHost;return Object(r.jsxs)(r.Fragment,{children:[" ",Object(r.jsx)(D.a,{type:"primary",onClick:t,children:" Host Now "})," "]})},L=a(261),J=a(268),F=a(264),z=a(266),H={width:"25%",textAlign:"center"},W=function(e){var t=Object(n.useRef)(),a=Object(n.useState)([]),c=Object(i.a)(a,2),s=c[0],o=c[1],l=Object(n.useState)(!1),m=Object(i.a)(l,2),S=m[0],N=m[1],I=Object(n.useState)(!1),T=Object(i.a)(I,2),E=T[0],C=T[1],R=Object(n.useState)(""),A=Object(i.a)(R,2),B=A[0],G=A[1],P=e.userType,M=e.hostLobbyKey,W=void 0===M?"":M,U=e.dataChannel,_=e.setAppState,V=e.setMyInfo,q=e.setAllPlayers,Q=e.myInfo,K=e.allPlayers,Y=e.getMyInfo,X=Object(n.useState)(""),Z=Object(i.a)(X,2),$=Z[0],ee=Z[1],te=Object(n.useState)({rounds:3,turns:10}),ae=Object(i.a)(te,2),re=ae[0],ne=ae[1],ce=Object(n.useRef)(),se=Object(n.useRef)();Object(n.useEffect)((function(){G(localStorage.getItem("sketchName")),console.log({hostLobbyKey:W}),ee(window.location.protocol+"//"+window.location.host+window.location.pathname+"?k=".concat(W)),t.current=U.current.getChannel("meta"),t.current.onclose=function(e){N(!0)},t.current.onmessage=function(e){console.log(e);var a=JSON.parse(e.data);switch(a.type){case f:console.log(a.players),o(a.players),q(a.players);break;case y:console.log("checking my info before starting game: ",Y()),0!==Object.keys(Y()).length&&_(j.ACTIVE_BOARD);break;case O:_(j.GATHERING);break;case x:console.log({type:k,userId:Y()}),t.current.send(JSON.stringify({type:k,userId:Y().id}));break;case v:ne((function(e){return Object(u.a)(Object(u.a)({},e),{},{turns:a.value})}));break;case w:ne((function(e){return Object(u.a)(Object(u.a)({},e),{},{rounds:a.value})}));break;default:console.log(a)}}}),[]),Object(n.useEffect)((function(){if(console.log(Q),Q.id){var e=Object.keys(K);console.log(e),console.log(s);for(var t=[],a=0;a<e.length;a++)console.log(K[e[a]]),t.push({userId:e[a],name:K[e[a]].name});console.log(t),o(t)}else C(!0)}),[B]);var oe=function(){if(B.length>0){var e=Math.random().toString(36).slice(-6);t.current.send(JSON.stringify({type:p,userId:e,name:B})),V(e,B),localStorage.setItem("sketchName",B),C(!1)}};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(d.a,{justify:"center",children:Object(r.jsx)(b.a,{children:Object(r.jsx)("div",{class:"patterns",children:Object(r.jsxs)("svg",{width:"100%",height:"100%",children:[Object(r.jsx)("defs",{children:Object(r.jsx)("style",{children:'@import url("https://fonts.googleapis.com/css?  family=Lora:400,400i,700,700i");'})}),Object(r.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#polka-dots)",children:" "}),Object(r.jsx)("text",{x:"50%",y:"60%","text-anchor":"middle",children:"Sketch"})]})})})}),Object(r.jsx)("div",{id:"waitingRoom",children:Object(r.jsx)(d.a,{justify:"center",children:Object(r.jsxs)(b.a,{sm:24,md:16,children:[Object(r.jsxs)(d.a,{wrap:!1,justify:"center",align:"middle",children:[Object(r.jsx)(b.a,{flex:"none",children:Object(r.jsx)("div",{className:"clearBg tbGg",children:" Share this link "})}),Object(r.jsx)(b.a,{flex:"auto",children:Object(r.jsx)("div",{className:"clearBg tbGg",children:$})}),Object(r.jsx)(b.a,{flex:"auto",children:Object(r.jsx)(D.a,{className:"clearBg tbGg",onClick:function(){navigator.clipboard.writeText($)},children:"copy"})})]}),Object(r.jsx)(L.a,{children:" Game Settings "}),"HOST"===P?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(d.a,{justify:"center",gutter:[4,4],children:[Object(r.jsx)(b.a,{xs:16,sm:16,md:16,lg:6,children:"Time per turn"}),Object(r.jsx)(b.a,{xs:8,sm:8,md:8,lg:4,children:Object(r.jsx)(J.a,{min:30,className:"ipf",style:{textAlign:"center"},ref:ce,onChange:function(e){t.current.send(JSON.stringify({type:v,value:e}))},defaultValue:re.turns,type:"number"})})]}),Object(r.jsxs)(d.a,{justify:"center",gutter:[4,4],children:[Object(r.jsx)(b.a,{xs:16,sm:16,md:16,lg:6,children:"Rounds"}),Object(r.jsxs)(b.a,{xs:8,sm:8,md:8,lg:4,children:[Object(r.jsx)(J.a,{min:1,className:"ipf",style:{textAlign:"center"},ref:se,onChange:function(e){t.current.send(JSON.stringify({type:w,value:e}))},defaultValue:re.rounds,type:"number"})," ",Object(r.jsx)("br",{})]})]}),Object(r.jsx)(d.a,{justify:"center",children:Object(r.jsx)(b.a,{md:24,lg:6,style:{textAlign:"center",padding:"8px"},children:Object(r.jsx)(D.a,{type:"primary",className:"startButton",onClick:function(){console.log(ce.current.state.value),ce.current.state.value<30?alert("Each turn should be atleast 30 secs"):se.current.state.value<1?alert("Minimum 1 round should be selected"):parseInt(ce.current.state.value)&&parseInt(se.current.state.value)?t.current.send(JSON.stringify({type:y,turns:ce.current.state.value,rounds:se.current.state.value})):alert("Please check turns and rounds value")},children:" Start Game "})})})]}):Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(F.a,{className:"clearBg",children:[Object(r.jsxs)("p",{children:["Time per turn: ",re.turns]}),Object(r.jsxs)("p",{children:["Rounds: ",re.rounds]}),Object(r.jsx)("p",{style:{textAlign:"center",border:"solid"},children:"Waiting for Host to start the game."})]})}),Object(r.jsx)(L.a,{children:" Players "}),s?Object(r.jsx)(F.a,{className:"clearBg",children:s.map((function(e,t){return Object(r.jsx)(F.a.Grid,{style:H,children:e.name},t)}))}):""]})})}),Object(r.jsxs)(h.a,{className:"blob",title:"Name",visible:E,closable:!1,destroyOnClose:!0,footer:null,children:["Type your name and press ENTER ",Object(r.jsx)("br",{}),Object(r.jsx)(z.a,{autoFocus:!0,style:{margin:"4px"},placeholder:"name",onChange:function(e){return G(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&oe()},value:B}),Object(r.jsx)("br",{}),Object(r.jsx)("center",{children:Object(r.jsx)(D.a,{type:"primary",onClick:oe,children:" Submit "})})]}),Object(r.jsx)(h.a,{className:"blob",title:"Unable to Connect to Server",visible:S,closable:!1,destroyOnClose:!0,footer:null,children:Object(r.jsx)("center",{children:Object(r.jsx)("a",{type:"primary",href:g,children:" Go To Home"})})})]})},U=a(125);var _=function(e){return e.currentTarget.label},V={37:1,38:1,39:1,40:1};function q(e){e.preventDefault()}function Q(e){if(V[e.keyCode])return q(e),!1}var K=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){K=!0}}))}catch(Ce){}var Y=!!K&&{passive:!1},X="onwheel"in document.createElement("div")?"wheel":"mousewheel";var Z=a(91),$=a(265),ee=a(156),te=a(106);function ae(e){var t,a=e.color,n=function(){return["#000000","#464646","#787878","#b4b4b4","#dcdcdc","#ffffff","#990030","#9c5a3c","#ed1c24","#ffa3b1","#ff7e00","#e5aa7a","#ffc20e","#f5e49c","#fff200","#fff9bd","#a8e61d","#d3f9bc","#22b14c","#9dbb61","#00b7ef","#99d9ea","#4d6df3","#709ad1","#2f3699","#546d8e","#6f3198","#b5a5d5"].map((function(t){return Object(r.jsxs)(b.a,{children:[" ",Object(r.jsx)(D.a,{className:"colorButton",style:{backgroundColor:t,border:a===t?"dashed":"none"},onClick:function(){e.handleColor(t)},children:" "})," "]})}))},c=(t={},Object(l.a)(t,1,1),Object(l.a)(t,80,80),t);return Object(r.jsx)("div",{children:Object(r.jsxs)(d.a,{children:[Object(r.jsxs)(b.a,{md:24,lg:12,style:{padding:"5px"},children:[Object(r.jsxs)(d.a,{justify:"space-around",children:[Object(r.jsx)(b.a,{children:Object(r.jsx)(Z.a,{title:"small",children:Object(r.jsx)(D.a,{className:"actionButton",onClick:function(){return e.handleFont(2)},children:" small "})})}),Object(r.jsx)(b.a,{children:Object(r.jsx)(Z.a,{title:"medium",children:Object(r.jsx)(D.a,{className:"actionButton",onClick:function(){return e.handleFont(25)},children:" md "})})}),Object(r.jsx)(b.a,{children:Object(r.jsx)(Z.a,{title:"large",children:Object(r.jsx)(D.a,{className:"actionButton",onClick:function(){return e.handleFont(60)},children:" lg  "})})}),Object(r.jsx)(b.a,{children:Object(r.jsx)(Z.a,{title:"undo",children:Object(r.jsxs)(D.a,{className:"actionButton",onClick:function(){return e.handleUndo()},children:[" ",Object(r.jsx)(te.d,{})," "]})})}),Object(r.jsx)(b.a,{children:Object(r.jsx)(Z.a,{title:"clear screen",color:"red",children:Object(r.jsxs)(D.a,{className:"actionButton",onClick:function(){return e.handleClear()},children:[" ",Object(r.jsx)(te.c,{})," "]})})}),Object(r.jsx)(b.a,{children:Object(r.jsx)(Z.a,{title:"color Bucket",children:Object(r.jsxs)(D.a,{className:"actionButton",onClick:function(){return e.handleFillColor(!0)},children:[" ",Object(r.jsx)(ee.a,{})," "]})})}),Object(r.jsx)(b.a,{children:Object(r.jsx)(Z.a,{title:"brush",children:Object(r.jsxs)(D.a,{className:"actionButton",onClick:function(){e.handleColor("black"),e.handleFillColor(!1)},children:[" ",Object(r.jsx)(te.b,{})," "]})})}),Object(r.jsx)(b.a,{children:Object(r.jsx)(Z.a,{title:"eraser",children:Object(r.jsxs)(D.a,{className:"actionButton",onClick:function(){return e.handleColor("eraser")},children:[" ",Object(r.jsx)(te.a,{})," "]})})})]}),Object(r.jsx)(d.a,{children:Object(r.jsx)(b.a,{span:24,children:Object(r.jsx)($.a,{className:"sizeSlider",marks:c,ref:e.sizeRef,min:1,max:80,onChange:e.onFontSlider,defaultValue:10,value:e.font})})})]}),Object(r.jsx)(b.a,{md:24,lg:12,style:{padding:"5px"},children:Object(r.jsx)(d.a,{children:Object(r.jsx)(n,{})})})]})})}var re=function(e,t,a,r){if(t){var n=r*(4*e.current.width)+4*a;return"rgba(".concat(t[n],", ").concat(t[n+1],", ").concat(t[n+2],", ").concat(t[n+3]/255,")")}return"rgba(255,255,255,1)"},ne=function(e,t,a,r,n){if(t&&a){var c=n*(4*e.current.width)+4*r;t[c]=a[0],t[c+1]=a[1],t[c+2]=a[2],t[c+3]=a[3]}},ce=function(e,t,a,r,n){console.log("pointer pointed to: ",r);var c=t.current.getImageData(0,0,e.current.width,e.current.height),s=c.data,o=Object.assign({},s),i=re(e,o,r.x,r.y);console.log("pixel color: ",i);var l=function(e){var t;if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(e))return 3===(t=e.substring(1).split("")).length&&(t=[t[0],t[0],t[1],t[1],t[2],t[2]]),[(t="0x"+t.join(""))>>16&255,t>>8&255,255&t,255]}(n||a());console.log("target fill color rgba:",l);for(var u=new Array(e.current.width),h=0;h<u.length;h++)u[h]=new Array(e.current.height);for(h=0;h<u.length;h++)for(var d=0;d<u[h].length;d++)u[h][d]=0;for(var b,j=[{x:r.x,y:r.y}];0!==j.length;)u[(b=j[j.length-1]).x][b.y]=1,j.pop(),i===re(e,o,b.x,b.y)&&(ne(e,s,l,b.x,b.y),b.x>0&&b.y>0&&0===u[b.x-1][b.y-1]&&(j.push({x:b.x-1,y:b.y-1}),u[b.x-1][b.y-1]=1),b.y>0&&0===u[b.x][b.y-1]&&(j.push({x:b.x,y:b.y-1}),u[b.x][b.y-1]=1),b.x<e.current.width-1&&b.y>0&&0===u[b.x+1][b.y-1]&&(j.push({x:b.x+1,y:b.y-1}),u[b.x+1][b.y-1]=1),b.x>0&&0===u[b.x-1][b.y]&&(j.push({x:b.x-1,y:b.y}),u[b.x-1][b.y]=1),b.x<e.current.width-1&&0===u[b.x+1][b.y]&&(j.push({x:b.x+1,y:b.y}),u[b.x+1][b.y]=1),b.x>0&&b.y<e.current.height-1&&0===u[b.x-1][b.y+1]&&(j.push({x:b.x-1,y:b.y+1}),u[b.x-1][b.y+1]=1),b.y<e.current.height-1&&0===u[b.x][b.y+1]&&(j.push({x:b.x,y:b.y+1}),u[b.x][b.y+1]=1),b.x<e.current.width-1&&b.y<e.current.height-1&&0===u[b.x+1][b.y+1]&&(j.push({x:b.x+1,y:b.y+1}),u[b.x+1][b.y+1]=1));t.current.putImageData(c,0,0)};function se(e){var t=Object(n.useState)(5),a=Object(i.a)(t,2),c=a[0],s=a[1],o=Object(n.useState)("#000000"),l=Object(i.a)(o,2),h=l[0],d=l[1],b=Object(n.useState)(!1),j=Object(i.a)(b,2),g=j[0],p=j[1],f=Object(n.useRef)(),y=e.brush,O=e.disable,x=e.refresh,k=e.sketchBoardRef,v=Object(n.useRef)(null),w=Object(n.useRef)(null),S=Object(n.useRef)([]),N=function(){var e=v.current,t=window.innerWidth>=992?5*window.innerWidth/8:window.innerWidth-10;e.style.width="".concat(t,"px"),e.style.height="".concat(t/2,"px"),e.style.cursor="crosshair",e.width=t,e.height=t/2;var a=e.getContext("2d");a.fillStyle=m,a.fillRect(0,0,e.width,e.height),a.lineCap="round",a.lineJoin="round",a.strokeStyle=z(),a.lineWidth=c,w.current=a},I=Object(n.useRef)(!1),T=Object(n.useRef)({}),G=function(e){I.current=e},P=function(e){var t=e.start,a=e.end,r=e.thick,n=e.color;w.current.strokeStyle="eraser"===(n||z())?m:n||z(),w.current.lineWidth=r||c,w.current.beginPath(),w.current.moveTo(t.x,t.y),w.current.lineTo(a.x,a.y),w.current.stroke(),w.current.closePath()},D=function(e){var t=e.nativeEvent,a=t.offsetX,r=t.offsetY,n=v.current.getBoundingClientRect();if(T.current={x:a||e.touches[0].clientX-n.left,y:r||e.touches[0].clientY-n.top},w.current.strokeStyle=z(),window.addEventListener("DOMMouseScroll",q,!1),window.addEventListener(X,q,Y),window.addEventListener("touchmove",q,Y),window.addEventListener("keydown",Q,!1),G(!0),g){ce(v,w,z,T.current);var c={type:C,data:{point:{x:T.current.x/v.current.width,y:T.current.y/v.current.height},color:z()||"#ffffff"}};y.send(JSON.stringify(c))}},M=function(){window.removeEventListener("DOMMouseScroll",q,!1),window.removeEventListener(X,q,Y),window.removeEventListener("touchmove",q,Y),window.removeEventListener("keydown",Q,!1),G(!1);var e={type:R};y.send(JSON.stringify(e))},L=function(e){if(I.current&&!O){var t,a,r=e.nativeEvent,n=r.offsetX,s=r.offsetY,o=v.current.getBoundingClientRect();e.touches?(t=n||e.touches[0].clientX-o.left,a=s||e.touches[0].clientY-o.top):(t=n,a=s);var i={x:t,y:a};P({start:T.current,end:i}),function(e,t){e={x:e.x/v.current.width,y:e.y/v.current.height},t={x:t.x/v.current.width,y:t.y/v.current.height};var a={type:E,data:{start:e,end:t,thick:c,color:z()}};y.send(JSON.stringify(a))}(T.current,i),T.current=i}},J=function(e){var t=e.start,a=e.end;return t={x:t.x*v.current.width,y:t.y*v.current.height},a={x:a.x*v.current.width,y:a.y*v.current.height},Object(u.a)(Object(u.a)({},e),{},{start:t,end:a})},F=function(){w.current.fillStyle=m,w.current.fillRect(0,0,v.current.width,v.current.height)};Object(n.useEffect)((function(){y.onmessage=function(e){var t=JSON.parse(e.data);switch(t.type){case E:if(Array.isArray(t.data))t.data.forEach((function(e){P(J(e))}));else P(J(t.data));break;case C:ce(v,w,z,{x:Math.floor(t.data.point.x*v.current.width),y:Math.floor(t.data.point.y*v.current.height)},t.data.color);break;case R:5===S.current.length&&S.current.shift(),console.log("saving history..."),S.current.push(w.current.getImageData(0,0,v.current.width,v.current.height));break;case A:!function(){if(0!==S.current.length){console.log("retrieving history...");var e=S.current[S.current.length-1];S.current.pop(),w.current.putImageData(e,0,0)}}();break;case B:F();break;default:console.log("unknown brush type")}}}),[]),Object(n.useEffect)((function(){console.log(k)}),[k]),Object(n.useEffect)((function(){N()}),[v]),Object(n.useEffect)((function(){F()}),[x]);var z=function(){return h};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("center",{style:{background:h,paddingTop:"5px"},children:Object(r.jsx)("canvas",{onMouseDown:D,onMouseUp:M,onMouseMove:L,onTouchStart:D,onTouchEnd:M,onTouchMove:L,ref:v,style:{border:"solid 2px",borderRadius:"10px"}})}),O?Object(r.jsx)(r.Fragment,{}):Object(r.jsx)(ae,{handleFont:function(e){p(!1),f.current.state.ref=e,s(e)},handleColor:function(e){console.log({color:e,board:"board"}),d(e)},sizeRef:f,onFontSlider:function(e){p(!1),s(e)},color:h,font:c,handleFillColor:function(e){p(e)},handleUndo:function(){var e={type:A};y.send(JSON.stringify(e))},handleClear:function(){var e={type:B};y.send(JSON.stringify(e))}})]})}var oe=a(166),ie=function(e){var t=e.chat,a=e.getMyInfo,c=e.getPlayerById,s=e.disable,o=e.timer,l=Object(n.useState)([]),h=Object(i.a)(l,2),j=h[0],g=h[1];Object(n.useEffect)((function(){t.onmessage=function(e){g((function(t){return[JSON.parse(e.data)].concat(Object(U.a)(t))}))}}),[]);return Object(r.jsxs)("div",{className:"roboto_font halfHeight",style:{border:"2px solid black"},children:[Object(r.jsx)(d.a,{children:Object(r.jsx)(b.a,{span:"24",children:Object(r.jsx)("input",{style:{width:"100%",border:"none",borderBottom:"solid thin"},placeholder:"Enter to send",onKeyDown:function(e){"Enter"!==e.key||s||(t.send(JSON.stringify({type:S,userId:a().id,time:o,data:e.target.value})),e.target.value="")},disabled:s})})}),Object(r.jsx)(d.a,{children:Object(r.jsx)(b.a,{children:Object(r.jsx)(oe.a,{height:400,width:250,itemCount:j.length,itemSize:function(){return 25},children:function(e){var t=e.index,n=e.style,s=c(j[t].userId).name,o=j[t].data,i=Object(r.jsx)(r.Fragment,{}),l=j[t].isClose&a().id===j[t].userId;return i=j[t].type===N?Object(r.jsxs)("b",{style:{color:"green"},children:[s,": GUESSED CORRECTLY"]}):j[t].type===I?Object(r.jsxs)("b",{style:{color:"darkorange"},children:['The Correct word is "',o,'"']}):j[t].type===T?Object(r.jsxs)("b",{style:{color:"green"},children:[s," JOINED"]}):l?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("b",{children:[s,": "]}),o," ",Object(r.jsx)("b",{style:{color:"orange"},children:"(is close!)"})]}):Object(r.jsxs)("span",{children:[Object(r.jsxs)("b",{children:[s,": "]}),o]}),Object(r.jsx)("div",{style:Object(u.a)(Object(u.a)({},n),{},{background:t%2?"#ddd":"#fff",paddingLeft:"5px"}),children:i})}})})})]})},le=["goat","binoculars","anniversary","analyst","blackberry","check","cheque","cave","coil","alcohol","creature","chutney","fork","tall","cook","cliff","park","fox","train station","carnival","rainbow","background","craftsman","cart","chaise longue","botany","antennae","telegram","bell","aggression","deer","assembly","brother","arrival","egg","champion","congress","pharmacist","radio","aluminium","chopstick","ocean","bucket","civilian","autumn","cornflakes","cut","answer","bakery","board","denmark","app","college","copyright","plane","bamboo","fish","host","calendar","spaghetti","apple","tea","bottle","hen","cabinet","crew","barbeque","ireland","corn","boogeyman","collision","bull","basketball","london","chairman","battleship","cousin","headphone","alphabet","cooker","cash","circuit","mango","casino","campaign","beggar","advertisement","bulb","bus stop","garlic","football","bass","tongue","baggage","sandal","clue","copywriter","antigen","salt","forest","nurse","nose","academy","professor","astrology","breakfast","ambulance","celebrity","copper","shirt","blouse","capital","certificate","flower","beer","toy","pad","dress","burglar","classmate","atheist","cowboy","lip","soccer","coast","medicine","beast","candy","classroom","hat","cello","foot","skyscraper","communication","purse","iron man","concert","author","animal","ring","temple","model","chemistry","click","compost","cow","chicken","queen","camera","constitution","cough","crack","comb","cushion","china","caravan","sheep","pouch","cloud","bathtub","nile","daughter","crab","wrist","container","airbag","shoe","police station","waiter","tennis","arrow","curry","neck","catalyst","angle","lawyer","hospital","concept","cabbage","wolf","dresser","back","turkey","india","laptop","crop","court","buffalo","ginger","costume","cell","color","bookcase","cursor","backbone","heart","stomach","tissue","theater","rugby","basket","software","blade","ankle","man","belly","carpenter","compass","crusader","instagram","alloy","association","cupcake","television","tiger","bowl","committee","armchair","bathroom","coal","census","blank","blast","mirror","cross","canada","bookstore","business","telivision","bead","cigarette","bandwidth","clipboard","tunnel","japan","lung","cholesterol","sparrow","station","congo","actress","buffet","award","farm","air","mouth","sunglass","bee","berry","whatsapp","juicer","conference","heel","badge","calf","airplane","barium","clover","auditorium","ambassador","bungalow","train","stave","copy","bank","choker","sofa","mall","cartoon","skin","ostrich","code","oil","earphone","curse","sun","appearance","woman","adapter","butter","apro","band","pant","crib","desk","combat","jacket","grandfather","rib","centimeter","camel","bone","speaker","crowd","beef","close","boot","roller coaster","baseball","liver","jumper","ears","backyard","cleavage","cycle","charger","couch","cafe","hostel","whale","piano","bomb","newspaper","pyramid","cravat","brother in law","chimpanzee","actor","chess","cherry","police","tie","crane","carriage","cheetah","bar","curd","cashew","music","bed","commander","glove","supermarket","coin","ammunition","basin","cube","onion","cotton","painter","factory","advocate","smile","beetle","biosphere","blue","caterpillar","banquette","flag","ballot","cabin","ape","cry","lamb","birdcage","blizzard","himalaya","chip","canteen","android","horn","account","antelope","dog","pipe","clone","pumpkin","grapes","batman","cemetery","facebook","bride","sunglasses","biscuit","abortion","cinema","vase","tuna","canal","bikini","canoe","snapchat","suit","superman","singer","cheek","aircraft","birthday","oven","whisker","accident","bankruptcy","underwear","keyboard","alien","carrot","garage","hair","customer","city","kidney","belt","apartment","balance","car","alligator","legging","scissors","clerk","archaeologist","telephone","attack","couple","dentist","sand","pancake","head","son","cage","cappuccino","comedy","contact","closet","restaurant","country","freezer","estate","cop","cot","circle","boy","milk","butler","giraffe","chest","god","sandwich","paper","apparatus","dutch","teacher","attenuation","panther","museum","cable","trench coat","cottage","boat","cocktail","strawberry","glass","buy","banana","adobe","blender","nokia","kangaroo","shrimp","swimming pool","pagoda","movie","chef","voice","senator","calorie","barometer","bow","box","guitar","school","grape","brass","bookmark","surgeon","anklet","climb","cockroach","refrigerator","currency","house","courtroom","aunt","koala","candle","turtle","petrol station","bridge","short","beach","ground","coach","jaw","crest","bill","river","criminal","xylophone","everest","amazon","parrot","sport","road","audit","elephant","cattle","villa","street","century","custard","smoke","afternoon","anagram","bitterness","guest","america","bra","jewelry","pakistan","cup","cylinder","cereal","core","cobbler","grandmother","chair","letter","hut","market","blossom","cuisine","trouser","bottom","cake","cactus","age","acid","boyfriend","wheelchair","bermuda","algebra","ancestor","phone","antique","lamp","lion","finger","county","credit","donkey","balcony","gift","carpet","panda","photographer","vest","violin","athlete","badminton","gown","clutch","cranberry","ash","wing","address","bos","sink","stamp","swan","scale","father","film","captain","palm","earring","bonfire","hungry","cookie","jersey","galaxy","affair","stadium","monkey","bench","clothes","microscope","architect","cat","acre","ship","electricity","auction","designer","browser","moonlight","boundary","book","candidate","sari","village","pigeon","king","community","cocoa","door","bag","coffee","cacao","water melon","barber","curtain","shoulder","hardware","pig","kid","black","artist","crown","pharmacy","claw","crush","horse","art","brand","course","ceramic","cork","bike","atmosphere","axis","atom","waist","ball","ceiling","wild boar","spoon","mobile","aquarium","bus","audience","necklace","tail","sky","barley","frog","wound","cookware","plant","brownie","shampoo","chocolate","cancer","clinic","agriculture","blog","parfume","battle","call","cucumber","library","coral","agreement","zebra","bat","dolphin","button","wallet","gas station","company","veterinarian","blanket","bubble","monitor","pen","chairperson","mother","suitcase","orange","blueberry","cardigan","cold","cutlet","compress","family","tomato","contact lens","gauva","umbrella","authentication","shark","referee","bird","church","boolean","boutique","cheesecake","knife","seal","noodle","calculator","character","citizen","herbs","beard","bean","pencil","sketch","popcorn","fan","toe","colleague","washing machine","hand","toothbrush","banyan","teen","sister","avalanche","antibody","frock","caffeine","netherland","cane","clock","cement","thor","star","sweater","water","crayon","creator","musician","home","castle","beverage","camp","collection","russia","cinnamon","bear","balloon","collar","coke","clan","umpire","courage","butcher","continent","vehicle","lemon","clip","twitter","courthouse","broccoli","grain","truck","cathedral","broadcast","bet","chrome","toothpaste","administrator","argentina","hulk","cloth","crystal","crow","saxophone","credenza","mouse","champagne","contagion","captain america","uncle","alarm","doctor","detective","bronze","colony","caramel","bread","astronomy","bug","snowman","eye","bath","composer","chalk","campus","brown","desktop","intel","boxer","hammer","owl","slipper","breadcrumb","bicycle","cloak","album","chaos","angel","coconut","consumer","remote","notebook","cauliflower","australia","charity","airport","bartender","conditioner","soap","ashtray","blackfish","pasta","razor","baby","antler","carbohydrate","column","hamburger","bolt","coat","physician","rice","taxi","cracker","cent","cream","cupboard","child","herb","luggage","peacock","cluster","block","table","zoo","crocodile","light","sock","cynic","butterfly","bullet","fruit","governor","anime","assignment","ballet","beat","card","coffin","leg","judge","tree","rabbit","hotel","cricket","algorithm","potato","cashier","ear","bracelet","biology","club","shower","coupon","drum","nvidia","watch","noise","climate","town","current","buckle","stair","billboard","client","cuckoo","tablet","england","blazer","crash","accuracy","battery","skirt","brazil","avocado","cheese","brain","computer","france","soup","concentrate","girl","cap","blood","booklet","Apple","Amazon","Microsoft","Google","Samsung","Coca Cola","Toyota","Mercedes","McDonalds","Disney","BMW","Intel","Facebook","IBM","Nike","Cisco","Instagram","Ikea","Pepsi","YouTube","Nescafe","Tesla","Netflix","Audi","Ebay","Adidas","United States","United Kingdom","Germany","Mexico","Korea","Egypt","Africa","Avatar","Avengers","Titanic","Star Wars","The Lion King","Frozen","Black Panther","Harry Potter","Iron Man","Captain America","Aquaman","The Lord of the Rings","Spider-Man","Transformers","Joker","Toy Story","Pirates of the Caribbean","Aladdin","Pirate","Jurassic Park","goat","binoculars","anniversary","analyst","blackberry","check","cheque","cave","coil","alcohol","creature","chutney","fork","tall","cook","cliff","park","fox","train station","carnival","rainbow","background","cart","botany","antenna","telegram","bell","deer","assembly","brother","arrival","egg","champion","congress","pharmacist","radio","aluminium","chopstick","ocean","bucket","civilian","autumn","cornflakes","cut","answer","bakery","board","denmark","app","college","copyright","plane","bamboo","fish","host","calendar","spaghetti","apple","tea","bottle","hen","cabinet","crew","barbeque","ireland","corn","boogeyman","collision","bull","basketball","london","chairman","battleship","cousin","headphone","alphabet","cooker","cash","circuit","mango","casino","campaign","beggar","advertisement","bulb","bus stop","garlic","football","bass","tongue","baggage","sandal","clue","copywriter","antigen","salt","forest","nurse","nose","academy","professor","astrology","breakfast","ambulance","celebrity","copper","shirt","blouse","capital","certificate","flower","beer","toy","pad","dress","burglar","classmate","atheist","cowboy","lip","soccer","coast","medicine","beast","candy","classroom","hat","cello","foot","skyscraper","communication","purse","iron man","concert","author","animal","ring","temple","model","chemistry","click","compost","cow","chicken","queen","camera","constitution","cough","crack","comb","cushion","china","caravan","sheep","pouch","cloud","bathtub","nile","daughter","crab","wrist","container","airbag","shoe","police station","waiter","tennis","arrow","curry","neck","catalyst","angle","lawyer","hospital","concept","cabbage","wolf","dresser","back","turkey","india","laptop","crop","court","buffalo","ginger","costume","cell","color","bookcase","cursor","backbone","heart","stomach","tissue","theater","rugby","basket","software","blade","ankle","man","belly","carpenter","compass","crusader","instagram","alloy","association","cupcake","television","tiger","bowl","committee","armchair","bathroom","coal","census","blank","blast","mirror","cross","canada","bookstore","business","bead","cigarette","bandwidth","clipboard","tunnel","japan","lung","cholesterol","sparrow","station","congo","actress","buffet","award","farm","air","mouth","sunglass","bee","berry","whatsapp","juicer","conference","heel","badge","calf","airplane","barium","clover","auditorium","ambassador","bungalow","train","copy","bank","choker","sofa","mall","cartoon","skin","ostrich","code","oil","earphone","curse","sun","appearance","woman","adapter","butter","apron","band","pant","crib","desk","combat","jacket","grandfather","rib","centimeter","camel","bone","speaker","crowd","beef","close","boot","roller coaster","baseball","liver","jumper","ears","backyard","cleavage","cycle","charger","couch","cafe","hostel","whale","piano","bomb","newspaper","pyramid","cravat","brother in law","chimpanzee","actor","chess","cherry","police","tie","crane","carriage","cheetah","bar","curd","cashew","music","bed","commander","glove","supermarket","coin","ammunition","basin","cube","onion","cotton","painter","factory","advocate","smile","beetle","biosphere","blue","caterpillar","flag","ballot","cabin","ape","cry","lamb","birdcage","blizzard","himalayas","chip","canteen","android","horn","account","antelope","dog","pipe","clone","pumpkin","grapes","batman","cemetery","facebook","bride","sunglasses","biscuit","abortion","cinema","vase","tuna","canal","bikini","canoe","snapchat","suit","superman","singer","cheek","aircraft","birthday","oven","whisker","accident","bankruptcy","underwear","keyboard","alien","carrot","garage","hair","customer","city","kidney","belt","apartment","balance","car","alligator","legging","scissors","clerk","archaeologist","telephone","attack","couple","dentist","sand","pancake","head","son","cage","cappuccino","comedy","contact","closet","restaurant","country","freezer","estate","cop","cot","circle","boy","milk","butler","giraffe","chest","god","sandwich","paper","apparatus","dutch","teacher","panther","museum","cable","trench coat","cottage","boat","cocktail","strawberry","glass","buy","banana","adobe","blender","nokia","kangaroo","shrimp","swimming pool","pagoda","movie","chef","voice","senator","calorie","barometer","bow","box","guitar","school","grape","brass","bookmark","surgeon","anklet","climb","cockroach","refrigerator","currency","house","courtroom","aunt","koala","candle","turtle","petrol station","bridge","short","beach","ground","coach","jaw","crest","bill","river","criminal","xylophone","everest","amazon","parrot","sport","road","audit","elephant","cattle","villa","street","century","custard","smoke","afternoon","anagram","bitterness","guest","america","bra","jewelry","pakistan","cup","cylinder","cereal","core","cobbler","grandmother","chair","letter","hut","market","blossom","cuisine","trouser","bottom","cake","cactus","age","acid","boyfriend","wheelchair","bermuda","algebra","ancestor","phone","antique","lamp","lion","finger","county","credit","donkey","balcony","gift","carpet","panda","photographer","vest","violin","athlete","badminton","gown","clutch","cranberry","ash","wing","address","boss","sink","stamp","swan","scale","father","film","captain","palm","earring","bonfire","hungry","cookie","jersey","galaxy","affair","stadium","monkey","bench","clothes","microscope","architect","cat","acre","ship","electricity","auction","designer","browser","moonlight","boundary","book","candidate","sari","village","pigeon","king","community","cocoa","door","bag","coffee","water melon","barber","curtain","shoulder","hardware","pig","kid","black","artist","crown","pharmacy","claw","crush","horse","art","brand","course","ceramic","cork","bike","atmosphere","axis","atom","waist","ball","ceiling","wild boar","spoon","mobile","aquarium","bus","audience","necklace","tail","sky","barley","frog","wound","cookware","plant","brownie","shampoo","chocolate","cancer","clinic","agriculture","blog","parfume","battle","call","cucumber","library","coral","agreement","zebra","bat","dolphin","button","wallet","gas station","company","veterinarian","blanket","bubble","monitor","pen","chairperson","mother","suitcase","orange","blueberry","cardigan","cold","cutlet","compress","family","tomato","contact lens","gauva","umbrella","authentication","shark","referee","bird","church","boolean","boutique","cheesecake","knife","seal","noodle","calculator","character","citizen","herbs","beard","bean","pencil","sketch","popcorn","fan","toe","colleague","washing machine","hand","toothbrush","banyan","teen","sister","avalanche","antibody","frock","caffeine","netherland","cane","clock","cement","thor","star","sweater","water","crayon","creator","musician","home","castle","beverage","camp","collection","russia","cinnamon","bear","balloon","collar","coke","clan","umpire","courage","butcher","continent","vehicle","lemon","clip","twitter","courthouse","broccoli","grain","truck","cathedral","broadcast","bet","chrome","toothpaste","administrator","argentina","hulk","cloth","crystal","crow","saxophone","credenza","mouse","champagne","contagion","captain america","uncle","alarm","doctor","detective","bronze","colony","caramel","bread","astronomy","bug","snowman","eye","bath","composer","chalk","campus","brown","desktop","intel","boxer","hammer","owl","slipper","breadcrumb","bicycle","cloak","album","chaos","angel","coconut","consumer","remote","notebook","cauliflower","australia","charity","airport","bartender","conditioner","soap","ashtray","blackfish","pasta","razor","baby","antler","carbohydrate","column","hamburger","bolt","coat","physician","rice","taxi","cracker","cent","cream","cupboard","child","herb","luggage","peacock","cluster","block","table","zoo","crocodile","light","sock","cynic","butterfly","bullet","fruit","governor","anime","assignment","ballet","beat","card","coffin","leg","judge","tree","rabbit","hotel","cricket","algorithm","potato","cashier","ear","bracelet","biology","club","shower","coupon","drum","nvidia","watch","noise","climate","town","current","buckle","stair","billboard","client","cuckoo","tablet","england","blazer","crash","accuracy","battery","skirt","brazil","avocado","cheese","brain","computer","france","soup","concentrate","girl","cap","blood","booklet"],ue=a(269),he=function(e){var t=Object(n.useRef)(null),a=e.timer,c=e.setTimer,s=e.timerFlag,o=function(){window.clearInterval(t.current)};return Object(n.useEffect)((function(){return t.current=window.setInterval((function(){a>0&&c((function(e){return e-1}))}),1e3),function(){return o()}}),[s]),Object(n.useEffect)((function(){a<=0&&o()}),[a]),Object(r.jsx)("div",{className:"Timer",children:Object(r.jsxs)("div",{style:{paddingLeft:"4px"},children:[Object(r.jsx)(ue.a,{})," ",a," sec "]})})},de=a(167),be=a(263),je=a(270),ge=a(271);var me=function(e){var t=function(){var e=Object(n.useRef)(null);return[Object(n.useCallback)((function(t){e.current&&console.log({"ref.current":e.current}),t&&console.log({node:t}),e.current=t}),[])]}(),a=Object(i.a)(t,1)[0],c=Object(n.useRef)([{title:"Player",dataIndex:"name"},{title:"Score",dataIndex:"sessionScore"}]),s=Object(n.useRef)([{title:"Player",dataIndex:"userId",props:{className:"clearBg"},render:function(e,t,a){return e===_.current?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("b",{children:ce(e).name}),Object(r.jsx)(je.a,{})]}):Object(r.jsx)("span",{children:ce(e).name})}},{title:"Score",dataIndex:"score",props:{className:"clearBg"}}]),o=Object(n.useState)(!1),l=Object(i.a)(o,2),u=l[0],j=l[1],m=Object(n.useRef)(""),p=Object(n.useRef)(""),f=Object(n.useState)(),y=Object(i.a)(f,2),O=y[0],x=y[1],k=Object(n.useState)(),v=Object(i.a)(k,2),w=v[0],S=v[1],N=Object(n.useState)(!1),I=Object(i.a)(N,2),T=I[0],E=I[1],C=Object(n.useRef)(""),R=Object(n.useState)(!1),A=Object(i.a)(R,2),B=A[0],G=A[1],P=Object(n.useState)(!1),M=Object(i.a)(P,2),L=M[0],J=M[1],F=Object(n.useState)(1),z=Object(i.a)(F,2),H=z[0],W=z[1],_=Object(n.useRef)(""),V=Object(n.useRef)(),q=Object(n.useState)(0),Q=Object(i.a)(q,2),K=Q[0],Y=Q[1],X=Object(n.useState)(0),Z=Object(i.a)(X,2),$=Z[0],ee=Z[1],te=Object(n.useRef)(["","",""]),ae=Object(n.useRef)(),re=e.sketchChannel,ne=e.getMyInfo,ce=e.getPlayerById,oe=e.allPlayers,ue=Object(n.useState)(),me=Object(i.a)(ue,2),pe=me[0],fe=me[1],ye=Object(n.useState)(),Oe=Object(i.a)(ye,2),xe=Oe[0],ke=Oe[1],ve=Object(n.useState)(!1),we=Object(i.a)(ve,2),Se=we[0],Ne=we[1],Ie=Object(n.useState)(!1),Te=Object(i.a)(Ie,2),Ee=Te[0],Ce=Te[1],Re=Object(n.useState)(!0),Ae=Object(i.a)(Re,2),Be=Ae[0],Ge=Ae[1],Pe=Object(n.useState)(!1),De=Object(i.a)(Pe,2),Me=De[0],Le=De[1],Je=de.a.useNotification(),Fe=Object(i.a)(Je,2),ze=Fe[0],He=Fe[1];Object(n.useEffect)((function(){console.log(oe),S(Object.keys(oe).reduce((function(e,t){return[].concat(Object(U.a)(e),[{userId:t,score:0}])}),[])),fe(re.current.getChannel("brush")),ke(re.current.getChannel("chat")),ae.current=re.current.getChannel("background"),We(),_e()}),[]);var We=function(){ae.current.onclose=function(e){Ce(!0)}},Ue=function(e){clearTimeout(V.current),console.log(te.current[e]),p.current=te.current[e];var t={type:"SELECTED_WORD",word:te.current[e]};ae.current.send(JSON.stringify(t)),E(!1)},_e=function(){console.log("initTurn"),ae.current.onmessage=function(e){console.log("message received");var t,a=JSON.parse(e.data);switch(a.type){case"INIT_TURN":Ne(!1),G(!1),Y(a.timer),W(a.roundNum);var n=ne();_.current=n.id,n.id===a.userId?(Ge(!1),Le(!0),te.current=function(e){for(var t=[];t.length<e;){var a=Math.floor(Math.random()*le.length);-1===t.indexOf(a)&&t.push(a)}return t.map((function(e){return le[e]}))}(3),E(!0),V.current=setTimeout((function(){""===p.current&&Ue(Math.floor(3*Math.random()))}),1e4)):(_.current=a.userId,Ge(!0),Le(!1));break;case"BLANKS":""===p.current?m.current=a.blanks:m.current=p.current,j(!0),ee((function(e){return e+1}));break;case"END_TURN":console.log("testing end turn"),console.log(a.scores),Ne(!0),S(function(e){return e.sort((function(e,t){return t.index-e.index}))}(a.scores)),x(function(e){return e.sort((function(e,t){return t.sessionScore-e.sessionScore}))}(a.scores)),j(!1),p.current="",m.current="",C.current=a.correctWord,G(!0),console.log(O);break;case"WINNER":_.current="",S(function(e){return e.sort((function(e,t){return t.score-e.score}))}(a.scores)),G(!1),J(!0);break;case"DISCONNECTED":t=a.id,ze.info({icon:Object(r.jsx)(ge.a,{}),message:"Payer ".concat(ce(t).name," got Disconnected"),placement:"topLeft"}),S(a.scores);break;case"SCORE":console.log(a),_.current=a.artist,S(a.scores);break;default:console.log("unkown type: "+a.type)}}},Ve=function(){if(m.current.includes("_")){var e=m.current.split(" ").map((function(e){return e.length})),t=m.current.split("").map((function(e){return" "===e?Object(r.jsx)("span",{className:"emptyCell",children:" "}):Object(r.jsx)("span",{className:"wordCell",children:" "})}));return Object(r.jsxs)(d.a,{align:"middle",justify:"center",children:[Object(r.jsx)(b.a,{children:t}),Object(r.jsx)(b.a,{children:Object(r.jsx)("span",{style:{paddingLeft:"10px"},children:e.join("-")})})]})}return m.current};return Object(r.jsxs)(r.Fragment,{children:[He,Object(r.jsxs)("div",{children:["Round: ",H]}),Object(r.jsxs)(d.a,{justify:"center",children:[Object(r.jsx)(b.a,{lg:4,className:"fullHeight",children:Object(r.jsx)(be.a,{className:"clearBg",columns:s.current,dataSource:w,pagination:!1})}),Object(r.jsx)(b.a,{lg:16,children:pe?Object(r.jsxs)(r.Fragment,{children:[u?Object(r.jsxs)(d.a,{style:{background:"white",margin:"4px"},align:"middle",children:[Object(r.jsx)(b.a,{span:4,children:Object(r.jsx)(he,{timer:K,setTimer:Y,timerFlag:$})}),Object(r.jsx)(b.a,{span:20,children:Object(r.jsxs)("div",{style:{fontWeight:"bold",textAlign:"center",padding:"4px"},children:[" ",Object(r.jsx)(Ve,{})," "]})})]}):Object(r.jsx)(r.Fragment,{}),Object(r.jsx)("div",{style:{position:"relative"},children:Object(r.jsx)(se,{ref:a,sketchBoardRef:a,brush:pe,disable:Be,refresh:Se})})]}):Object(r.jsx)(r.Fragment,{})}),Object(r.jsx)(b.a,{lg:4,xs:24,children:xe?Object(r.jsx)(ie,{chat:xe,getPlayerById:ce,getMyInfo:ne,disable:Me,timer:K}):Object(r.jsx)(r.Fragment,{})})]}),Object(r.jsxs)(h.a,{className:"blob",title:"Choose Word",visible:T,closable:!1,destroyOnClose:!0,footer:null,children:[Object(r.jsx)(D.a,{type:"text",onClick:function(){return Ue(0)},children:te.current[0]}),Object(r.jsx)(D.a,{type:"text",onClick:function(){return Ue(1)},children:te.current[1]}),Object(r.jsx)(D.a,{type:"text",onClick:function(){return Ue(2)},children:te.current[2]})]}),Object(r.jsxs)(h.a,{className:"blob",title:"Scores",visible:B,closable:!1,destroyonClose:!0,footer:null,children:[Object(r.jsx)("center",{children:Object(r.jsxs)("h3",{children:[" Word is: ",Object(r.jsxs)("b",{children:[" ",C.current," "]})," "]})}),Object(r.jsx)(be.a,{columns:c.current,dataSource:O,pagination:!1})]}),Object(r.jsx)(h.a,{className:"blob",title:"Leader Board",visible:L,closable:!1,destroyonClose:!0,footer:null,children:Object(r.jsx)(be.a,{columns:s.current,dataSource:w,pagination:!1})}),Object(r.jsx)(h.a,{className:"blob",title:"Unable to Connect to Server",visible:Ee,closable:!1,destroyonClose:!0,footer:null,children:Object(r.jsx)("center",{children:Object(r.jsx)("a",{type:"primary",href:g,children:" Go To Home"})})})]})},pe=a(143),fe=a(37),ye=a(40),Oe=function(){function e(t,a){Object(fe.a)(this,e),this.id="player-id",this.name="Player",this.sessionScore=0,this.score=0,this.solved=!1,this.guessedTime=0,this.id=t,this.name=a}return Object(ye.a)(e,[{key:"resetSessionScore",value:function(){this.sessionScore=0,this.solved=!1,this.guessedTime=0}},{key:"resetScore",value:function(){this.score=0,this.sessionScore=0,this.solved=!1,this.guessedTime=0}},{key:"addScore",value:function(e){this.score+=e,this.sessionScore=e,this.solved=!0}},{key:"addGuessedTime",value:function(e){this.guessedTime=e,this.solved=!0}}]),e}(),xe=function(){function e(){Object(fe.a)(this,e),this.players={}}return Object(ye.a)(e,[{key:"addPlayer",value:function(e,t){this.players[e]=new Oe(e,t)}},{key:"getScore",value:function(){return Object.values(this.players).map((function(e,t){return{name:e.name,userId:e.id,sessionScore:e.sessionScore,score:e.score,rank:t}}))}},{key:"getAllPlayers",value:function(){return Object.values(this.players).map((function(e,t){return{userId:e.id,name:e.name}}))}},{key:"getUserById",value:function(e){return this.players[e]}},{key:"deletePlayer",value:function(e){delete this.players[e]}},{key:"calculateScores",value:function(e){console.log(e);var t,a,r,n,c,s=Object.values(this.players),o=0,i=0,l=0;for(o=0;o<s.length;o++)s[o].id!==e?0!==s[o].guessedTime&&i++:n=o;for(o=0;o<s.length;o++)s[o].id!==e&&(0===i?s[o].addScore(0):(0===(t=s[o].guessedTime)?(a=0,r=0):(a=1*Math.pow(t,3)+165*Math.pow(t,2)+234*t,r=100/i),l+=c=Math.min(Math.round(a+r),500),s[o].addScore(Math.max(c,0))));e&&""!==e&&(0===i?s[n].addScore(0):(a=200/(s.length-1)*i,r=l/(4*(s.length-1))*3,c=Math.min(Math.round(a+r),500),console.log(c),s[n].addScore(Math.max(c,0))))}}]),e}(),ke=function(){function e(){Object(fe.a)(this,e),this.players=new xe,this.currWord="CORRECT",this.playerIds=[],this.roundNum=0,this.isGameSessionActive=!1,this.turnTime=10,this.rounds=3,this.sessionDrawingQueue=[],this.sessionBrushQueue={},this.playerPositions={},this.isSignalEndOnStartGame=!0,this.isGameActive=!1}return Object(ye.a)(e,[{key:"setSignalEndOnStartGame",value:function(e){this.isSignalEndOnStartGame=e}},{key:"setGameSession",value:function(e){this.isGameSessionActive=e}},{key:"setCurrWord",value:function(e){this.currWord=e,console.log(this.currWord)}},{key:"handle",value:function(e){switch(_(e)){case"meta":this.handleMeta(e);break;case"chat":this.handleChat(e);break;case"background":this.handleBackGround(e);break;case"brush":this.handleBrush(e);break;default:this.publish(e)}}},{key:"addBoardcastChannel",value:function(e,t){e in this.sessionBrushQueue||(this.sessionBrushQueue[e]=[]),this.pollBrushQueue(e,t)}},{key:"pollBrushQueue",value:function(e,t){var a=this,r=0;setTimeout((function(){var n=a.sessionBrushQueue[e].length,c=a.sessionBrushQueue[e].slice(r,n);c.length>0&&(r=n,t.send(JSON.stringify(c)))}),100)}},{key:"resetScores",value:function(){for(var e=this.players.getAllPlayers(),t=0;t<e.length;t++)this.players.getUserById(e[t].userId).resetScore()}},{key:"resetSessionScores",value:function(){for(var e=this.players.getAllPlayers(),t=0;t<e.length;t++)this.players.getUserById(e[t].userId).resetSessionScore()}},{key:"handleTimeOut",value:function(){var e=this;console.log("hello"),this.setGameSession(!1),this.players.calculateScores(this.artist),this.artist="",console.log(this.players.getScore()),this.sessionBrushQueue.brush=[],this.sessionDrawingQueue=[];var t={type:"CORRECT_WORD",data:this.currWord};this.publish({data:JSON.stringify(t)},"chat");var a={type:"END_TURN",scores:this.players.getScore(),correctWord:this.currWord};this.publish({data:JSON.stringify(a)},"background"),this.resetSessionScores(),setTimeout((function(){e.initiateSession()}),4e3)}},{key:"initiateSession",value:function(){var e=this;if(0===this.playerIds.length&&this.roundNum<this.rounds&&(this.playerIds=this.players.getAllPlayers(),console.log(this.playerIds),this.roundNum=this.roundNum+1),this.playerIds.length){var t=this.playerIds[this.playerIds.length-1].userId;console.log(t);var a=this.players.getAllPlayers().find((function(e){return e.userId===t}));if(console.log(a),!a)return this.playerIds.pop(),void this.initiateSession();setTimeout((function(){e.artist=t,e.sessionDrawingQueue=[],console.log("message sent");var a={type:"INIT_TURN",userId:t,roundNum:e.roundNum,timer:e.turnTime,rounds:e.rounds};e.publish({data:JSON.stringify(a)},"background")}),1e3),this.playerIds.pop()}else{var r={type:"WINNER",scores:this.players.getScore()};this.publish({data:JSON.stringify(r)},"background"),this.resetScores(),this.roundNum=0;var n={type:"END_GAME"};setTimeout((function(){e.publish({data:JSON.stringify(n)},"meta"),e.isGameActive=!1}),4e3)}}},{key:"generateBlanks",value:function(e){return e.replace(/([a-zA-Z])/g,"_")}},{key:"checkIfEveryOneSolved",value:function(){for(var e=this.players.getAllPlayers(),t=e.length,a=0;a<e.length;a++)!0===this.players.getUserById(e[a].userId).solved&&(t-=1);1===t&&(clearTimeout(this.handleTimeOutVariable),this.handleTimeOut())}},{key:"isGuessedWordClose",value:function(e,t){if(Math.abs(e.length-t.length)>1)return!1;var a=0;e.length!==t.length&&(a=1);for(var r=0;r<Math.min(e.length,t.length);r++)if(e[r]!==t[r]&&a++,a>1)return!1;return!0}},{key:"handleBrush",value:function(e){this.sessionDrawingQueue.push(e),this.publish(e)}},{key:"handleBackGround",value:function(e){var t=this,a=JSON.parse(e.data);if("SELECTED_WORD"===a.type){this.setCurrWord(a.word),this.setGameSession(!0);var r={type:"BLANKS",blanks:this.generateBlanks(a.word)};this.publish({data:JSON.stringify(r)},"background"),this.handleTimeOutVariable=setTimeout((function(){t.handleTimeOut()}),1e3*this.turnTime)}else this.publish(e)}},{key:"handleChat",value:function(e){var t=JSON.parse(e.data);if(!this.players.getUserById(t.userId).solved&&t.data)if(t.data.toLowerCase()===this.currWord.toLowerCase()&&this.isGameSessionActive){this.players.getUserById(t.userId).addGuessedTime(t.time/this.turnTime);var a={userId:t.userId,type:N};this.publish({data:JSON.stringify(a)},_(e)),this.checkIfEveryOneSolved()}else this.isGuessedWordClose(t.data.toLowerCase(),this.currWord.toLowerCase())?t.isClose=!0:t.isClose=!1,this.publish({data:JSON.stringify(t)},_(e))}},{key:"handleMeta",value:function(e){switch(JSON.parse(e.data).type){case p:this.handleNewPlayer(e);break;case k:this.checkLiveness(e);break;case v:this.turnTime=JSON.parse(e.data).value,this.publish(e);break;case w:this.rounds=JSON.parse(e.data).value,this.publish(e);break;case y:this.handleStartGame(e);default:this.publish(e)}}},{key:"handleStartGame",value:function(e){var t=JSON.parse(e.data);this.turnTime=t.turns,this.rounds=t.rounds,this.isGameActive=!0,this.initiateSession(),this.isSignalEndOnStartGame&&this.signalEnd()}},{key:"handleNewPlayer",value:function(e){var t=this,a=JSON.parse(e.data);this.players.addPlayer(a.userId,a.name);var r={type:f,players:this.players.getAllPlayers()};this.publish({data:JSON.stringify(r)},_(e)),this.publish({data:JSON.stringify({type:v,value:this.turnTime})},_(e)),this.publish({data:JSON.stringify({type:w,value:this.rounds})},_(e)),this.isGameActive&&(this.publish({data:JSON.stringify({type:y,turns:this.turnTime,rounds:this.rounds})},"meta"),setTimeout((function(){t.publish({data:JSON.stringify({type:"SCORE",scores:t.players.getScore(),artist:t.artist})},"background"),t.publish({data:JSON.stringify({type:T,userId:a.userId,data:""})},"chat")}),1e3))}},{key:"checkHeartBeat",value:function(){var e=this;this.alivePlayers=[];var t={type:x};this.publish({data:JSON.stringify(t)},"meta"),setTimeout((function(){var t=e.players.getAllPlayers();console.log(e.alivePlayers);for(var a=0;a<t.length;a++)e.alivePlayers.includes(t[a].userId)||(console.log(t[a].userId),e.players.deletePlayer(t[a].userId),e.publish({data:JSON.stringify({type:"DISCONNECTED",id:t[a].userId,scores:e.players.getScore()})},"background"),e.artist===t[a].userId&&(clearTimeout(e.handleTimeOutVariable),e.artist="",e.resetSessionScores(),e.handleTimeOut()),console.log(e.players.getAllPlayers()));var r={type:f,players:e.players.getAllPlayers()};e.publish({data:JSON.stringify(r)},"meta")}),3e3)}},{key:"checkLiveness",value:function(e){console.log(e);var t=JSON.parse(e.data);console.log(t),console.log("alive player: ",t.userId),this.alivePlayers.push(t.userId)}}]),e}(),ve=function(){var e=Object(n.useRef)(),t=Object(n.useRef)({}),a=Object(n.useRef)({}),c=Object(n.useState)(),s=Object(i.a)(c,2),o=s[0],m=s[1],p=Object(n.useState)(null),f=Object(i.a)(p,2),y=f[0],O=f[1],x=Object(n.useState)(!1),k=Object(i.a)(x,2),v=k[0],w=k[1],S=Object(n.useRef)(""),N=Object(n.useRef)(""),I=Object(n.useRef)("Unable to Connect to Server, Try Refreshing the page"),T=function(e){a.current=e.reduce((function(e,t){return Object(u.a)(Object(l.a)({},t.userId,{name:t.name}),e)}),{})},E=function(e){return a.current[e]||{name:"MISSING"}},C=function(e,a){t.current={id:e,name:a}},R=function(){return t.current},A=function(t){e.current=new pe.a.Guest(t,P,G,(function(){console.log("APP_STATE.GATHERING"),m(j.GATHERING)}),(function(e,t){!function(e,t){console.log(e,t),"failed"===e?(I.current=!1===t?"You are trying to connect to an inactive game, please recheck the url":"Sorry, A technical issue from our side, please reload the page",w(!0),m(j.DISCONNECTED)):"unknown"===e&&(w(!0),m(j.DISCONNECTED))}(e,t)})),N.current="GUEST"},B=function(t){var a=new ke;a.setSignalEndOnStartGame(!1),e.current=new pe.a.RoomHost(t,P,G,a),N.current="HOST",m(j.GATHERING)};return Object(n.useEffect)((function(){window.addEventListener("beforeunload",(function(e){var t="You will be disconnected from current session if you leave the page";return(e||window.event).returnValue=t,t}));var e,t=new URLSearchParams(window.location.search).get("k");console.log(t),t?(e=t,S.current=e,A(t),O(t)):B((function(e){!function(e,t){if(window.history.pushState){var a=window.location.protocol+"//"+window.location.host+window.location.pathname+"?".concat(e,"=").concat(t);window.history.pushState({path:a},"",a)}}("k",e),O(e)}))}),[]),Object(r.jsx)(r.Fragment,{children:function(){switch(o){case j.HOST:return console.log("host state"),Object(r.jsx)(M,{handleHost:B});case j.GATHERING:return console.log("gathering state"),Object(r.jsx)(W,{hostLobbyKey:y,userType:N.current,dataChannel:e,setAppState:m,setMyInfo:C,setAllPlayers:T,myInfo:t.current,allPlayers:a.current,getMyInfo:R});case j.DISCONNECTED:return console.log("disconnected state"),Object(r.jsx)(h.a,{className:"blob",title:I.current,visible:v,closable:!1,destroyOnClose:!0,footer:null,children:Object(r.jsx)("center",{children:Object(r.jsx)("a",{type:"primary",href:g,children:" Go To Home"})})});case j.PASSIVE_BOARD:return console.log("passive state"),Object(r.jsx)(r.Fragment,{});case j.ACTIVE_BOARD:return console.log("active state"),Object(r.jsx)(me,{sketchChannel:e,getMyInfo:R,getPlayerById:E,allPlayers:a.current});case j.TERMINAL:return console.log("terminal state"),Object(r.jsx)(r.Fragment,{});default:return console.log("default state"),Object(r.jsx)(d.a,{justify:"center",children:Object(r.jsx)(b.a,{children:Object(r.jsxs)("section",{id:"global",children:[Object(r.jsx)("div",{id:"top",class:"mask",children:Object(r.jsx)("div",{class:"plane"})}),Object(r.jsx)("div",{id:"middle",class:"mask",children:Object(r.jsx)("div",{class:"plane"})}),Object(r.jsx)("div",{id:"bottom",class:"mask",children:Object(r.jsx)("div",{class:"plane"})}),Object(r.jsx)("p",{id:"connectingText",children:Object(r.jsx)("i",{children:"CONNECTING..."})})]})})})}}()})},we=a(262),Se=a(272),Ne=(a(257),function(e){var t=e.setactivateRoom;return Object(r.jsxs)("div",{children:[Object(r.jsx)(d.a,{justify:"center",children:Object(r.jsx)(b.a,{children:Object(r.jsx)("div",{class:"patterns",children:Object(r.jsxs)("svg",{width:"100%",height:"100%",children:[Object(r.jsx)("defs",{children:Object(r.jsx)("style",{children:'@import url("https://fonts.googleapis.com/css?  family=Lora:400,400i,700,700i");'})}),Object(r.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#polka-dots)",children:" "}),Object(r.jsx)("text",{x:"50%",y:"40%","text-anchor":"middle",children:"Sketch"})]})})})}),Object(r.jsx)(d.a,{justify:"center",children:Object(r.jsx)(b.a,{className:"rooms-container",children:Object(r.jsx)("button",{className:"room-buttons",onClick:function(){t(!0)},children:" Create Room "})})}),Object(r.jsx)(d.a,{justify:"center",children:Object(r.jsxs)(b.a,{className:"introText",sm:24,md:16,lg:8,children:[Object(r.jsx)("center",{children:Object(r.jsx)("h3",{children:"How to play?"})}),Object(r.jsx)("p",{children:"Click on create room and a link will be generated. Share that link with your friends for them to join this room, and you can start the game when everyone joined."}),Object(r.jsx)("h3",{children:"Rules of the game"}),Object(r.jsxs)("ul",{children:[Object(r.jsx)("li",{children:"Its a simple game of pictionary"}),Object(r.jsx)("li",{children:"The drawer will be given a word which he has to convey to his friends by drawing"}),Object(r.jsx)("li",{children:"The faster other players guess the word from the drawing greater the points that they get"}),Object(r.jsx)("li",{children:"In this fashion each player will get an chance to draw per round"}),Object(r.jsx)("li",{children:"Finally who ever has the highest score wins"})]})]})})]})}),Ie=function(){var e=we.a.Content,t=Object(n.useState)(!1),a=Object(i.a)(t,2),c=a[0],s=a[1],o=Object(n.useState)(function(e){var t=window.location.search;return new URLSearchParams(t).get(e)}("k")),l=Object(i.a)(o,2),u=l[0],d=l[1],b=function(){s((function(e){return!e}))};return console.log("Home page"),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{class:"area",children:Object(r.jsxs)("ul",{class:"circles",children:[Object(r.jsx)("li",{}),Object(r.jsx)("li",{}),Object(r.jsx)("li",{}),Object(r.jsx)("li",{}),Object(r.jsx)("li",{}),Object(r.jsx)("li",{}),Object(r.jsx)("li",{}),Object(r.jsx)("li",{}),Object(r.jsx)("li",{}),Object(r.jsx)("li",{}),Object(r.jsx)("li",{}),Object(r.jsx)("li",{}),Object(r.jsx)("li",{}),Object(r.jsx)("li",{})]})}),Object(r.jsx)(we.a,{className:"gradientBg fullHeight",children:Object(r.jsxs)(e,{className:"fullHeight",style:{padding:"8px",height:"100%"},children:[Object(r.jsx)("div",{style:{background:"none",height:"50px",paddingLeft:"50px"},children:Object(r.jsx)(D.a,{onClick:b,children:Object(r.jsx)(Se.a,{})})}),u?Object(r.jsx)(ve,{className:"sketch"}):Object(r.jsx)(Ne,{setactivateRoom:d}),Object(r.jsxs)(h.a,{className:"blob",title:null,visible:c,onCancel:b,destroyOnClose:!0,footer:Object(r.jsxs)("span",{style:{fontSize:"15px"},children:["This app is built by ",Object(r.jsx)("a",{href:"https://github.com/Rajesh-Khanna",children:"@Rajesh"})," and ",Object(r.jsx)("a",{href:"https://github.com/theVirtualMan",children:"@Rohit"})]}),children:[Object(r.jsxs)("h3",{style:{float:"right"},children:[Object(r.jsx)("a",{className:"navElement",href:g,children:" Home"}),Object(r.jsx)("a",{className:"navElement",href:g,children:" other game"})]}),Object(r.jsx)(L.a,{}),Object(r.jsxs)("p",{children:[Object(r.jsx)("h3",{children:" Hi "}),"This is an online game where you guess what other people are drawing. One can easily understand how to play the game even as a beginner. ",Object(r.jsx)("br",{}),"Since this is peer to peer game, To get the best experience of the game it's always good that hosted person should have a better internet connectivity and a well equipped device.",Object(r.jsx)("br",{}),"If you enjoyed our game, Buy me coffee here , though I am more of a tea guy.",Object(r.jsx)("br",{})]})]})]})})]})},Te=function(){return Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(Ie,{})})},Ee=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,273)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),r(e),n(e),c(e),s(e)}))};o.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(Te,{className:"styleFont"})}),document.getElementById("root")),Ee()}},[[258,1,2]]]);
//# sourceMappingURL=main.eb6fb0e5.chunk.js.map